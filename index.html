<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valist</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto;
    background:#14181c;color:#9ab
}
.header{background:#1c2228;border-bottom:1px solid #2c3440;position:sticky;top:0;z-index:100}
.nav-container{max-width:1200px;margin:auto;padding:1rem 2rem;display:flex;justify-content:space-between}
.logo{color:#5ac8fa;font-size:1.8rem;font-weight:700;text-decoration:none}
.nav-links{list-style:none;display:flex;gap:1.5rem}
.nav-links a{color:#9ab;text-decoration:none}
.nav-links a.active{color:#5ac8fa}

.container{max-width:1200px;margin:auto;padding:3rem 2rem}

.items-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:1.5rem}
@media(max-width:900px){.items-grid{grid-template-columns:repeat(3,1fr)}}
@media(max-width:500px){.items-grid{grid-template-columns:repeat(2,1fr)}}

.item-card{background:#1c2228;border-radius:8px;cursor:pointer;overflow:hidden}
.item-card:hover{transform:translateY(-4px)}
.item-image{aspect-ratio:2/3;background:#2c3440}
.item-image img{width:100%;height:100%;object-fit:cover}
.placeholder{display:flex;align-items:center;justify-content:center;height:100%;font-size:3rem}
.item-info{padding:1rem}
.item-name{color:#fff;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.item-meta{display:flex;justify-content:space-between;font-size:.85rem}
.item-rating{background:#5ac8fa;color:#14181c;padding:.2rem .5rem;border-radius:4px}

.filters{background:#1c2228;padding:1rem;border-radius:8px;display:flex;gap:1rem;flex-wrap:wrap}

.modal-overlay{
    position:fixed;inset:0;background:rgba(0,0,0,.7);
    display:none;align-items:center;justify-content:center;z-index:1000
}
.modal{
    background:#1c2228;border-radius:10px;
    max-width:700px;width:90%;padding:2rem;position:relative
}
.modal img{width:200px;border-radius:8px}
.close-btn{
    position:absolute;top:1rem;right:1rem;
    background:none;border:none;color:#9ab;font-size:1.5rem;cursor:pointer
}

.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem;margin-top:2rem}
.stat-box{background:#1c2228;padding:2rem;border-radius:8px;text-align:center}
.stat-box h2{color:#5ac8fa;font-size:2.5rem}
</style>
</head>

<body>

<header class="header">
<nav class="nav-container">
<a href="#" class="logo" onclick="showPage('home')">Valist</a>
<ul class="nav-links">
<li><a href="#" class="active" onclick="showPage('home')">In√≠cio</a></li>
<li><a href="#" onclick="showPage('restaurantes')">Restaurantes</a></li>
<li><a href="#" onclick="showPage('livros')">Livros</a></li>
<li><a href="#" onclick="showPage('animes')">Animes</a></li>
<li><a href="#" onclick="showPage('games')">Games</a></li>
<li><a href="#" onclick="showPage('series-filmes')">S√©ries/Filmes</a></li>
<li><a href="#" onclick="showPage('estatisticas')">Estat√≠sticas</a></li>
</ul>
</nav>
</header>

<main id="main-content"></main>

<!-- MODAL -->
<div id="itemModal" class="modal-overlay" onclick="closeModal(event)">
<div class="modal">
<button class="close-btn" onclick="closeModal()">‚úï</button>
<div id="modalContent"></div>
</div>
</div>

<script>
let allData=[]
const CATEGORIES={
'restaurantes':'Restaurantes',
'livros':'Livros',
'animes':'Animes',
'games':'Games',
'series-filmes':'S√©ries/Filmes'
}

function parseCSV(csv){
const lines=csv.trim().split('\n')
const headers=lines[0].split(',')
return lines.slice(1).map(l=>{
const v=l.split(',')
const o={}
headers.forEach((h,i)=>o[h.trim()]=v[i]?.trim()||'')
o.id=+o.id;o.nota=+o.nota;o.tamanho=+o.tamanho;o.ano=+o.ano
return o})
}

function loadData(){
fetch('data.csv').then(r=>r.text()).then(csv=>{
allData=parseCSV(csv)
showPage('home')
})
}

function getImagePath(id){return `images/${id}.jpg`}

function createItemCard(item){
return `
<div class="item-card" onclick="openModal(${item.id})">
<div class="item-image">
<img src="${getImagePath(item.id)}" onerror="this.parentElement.innerHTML='<div class=\\'placeholder\\'>üì∑</div>'">
</div>
<div class="item-info">
<div class="item-name">${item.nome}</div>
<div class="item-meta">
<span class="item-rating">${item.nota.toFixed(1)}</span>
<span>${new Date(item.data_avaliacao).toLocaleDateString('pt-BR')}</span>
</div>
</div>
</div>`
}

function showHome(){
let html=`<div class="container"><h1 style="color:#fff">Valist</h1>`
Object.keys(CATEGORIES).forEach(cat=>{
const items=allData.filter(i=>i.categoria===cat).sort((a,b)=>b.nota-a.nota).slice(0,5)
if(!items.length)return
html+=`<h2 style="margin:2rem 0;color:#fff">${CATEGORIES[cat]}</h2>
<div class="items-grid">${items.map(createItemCard).join('')}</div>`
})
html+='</div>'
document.getElementById('main-content').innerHTML=html
}

function showCategory(cat){
window.currentCategory=cat
const items=allData.filter(i=>i.categoria===cat)
document.getElementById('main-content').innerHTML=`
<div class="container">
<h1 style="color:#fff">${CATEGORIES[cat]}</h1>
<div class="items-grid">${items.map(createItemCard).join('')}</div>
</div>`
}

function openModal(id){
const i=allData.find(x=>x.id==id)
document.getElementById('modalContent').innerHTML=`
<div style="display:flex;gap:2rem;flex-wrap:wrap">
<img src="${getImagePath(i.id)}">
<div>
<h2 style="color:#fff">${i.nome}</h2>
<p><b>Categoria:</b> ${CATEGORIES[i.categoria]}</p>
<p><b>Subcategoria:</b> ${i.subcategoria}</p>
<p><b>Nota:</b> ${i.nota}</p>
<p><b>Ano:</b> ${i.ano}</p>
<p><b>Tamanho:</b> ${i.tamanho} ${i.unidade_tamanho}</p>
<p><b>Avaliado em:</b> ${new Date(i.data_avaliacao).toLocaleDateString('pt-BR')}</p>
<p style="margin-top:1rem">${i.descricao}</p>
</div>
</div>`
document.getElementById('itemModal').style.display='flex'
}

function closeModal(e){
if(!e||e.target.id==='itemModal')
document.getElementById('itemModal').style.display='none'
}

function showStats(){
const perMonth={}
let pages=0,episodes=0
allData.forEach(i=>{
const m=i.data_avaliacao.slice(0,7)
perMonth[m]=(perMonth[m]||0)+1
if(i.unidade_tamanho==='p√°ginas')pages+=i.tamanho
if(i.unidade_tamanho==='epis√≥dios')episodes+=i.tamanho
})
document.getElementById('main-content').innerHTML=`
<div class="container">
<h1 style="color:#fff">Estat√≠sticas</h1>
<div class="stats-grid">
<div class="stat-box"><h2>${pages}</h2><p>P√°ginas lidas</p></div>
<div class="stat-box"><h2>${episodes}</h2><p>Epis√≥dios assistidos</p></div>
</div>
<h2 style="color:#fff;margin-top:3rem">Por m√™s</h2>
${Object.entries(perMonth).map(([m,v])=>`
<div>${m} (${v})
<div style="background:#2c3440;height:8px">
<div style="width:${v*20}px;height:8px;background:#5ac8fa"></div>
</div></div>`).join('')}
</div>`
}

function showPage(p){
document.querySelectorAll('.nav-links a').forEach(a=>a.classList.remove('active'))
event?.target?.classList.add('active')
if(p==='home')showHome()
else if(p==='estatisticas')showStats()
else showCategory(p)
}

loadData()
</script>

</body>
</html>
